<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - SGMRP</title>
    <meta name="description" content="Painel principal do Sistema de Gerenciamento de Mapas de Refei√ß√µes Penitenci√°rio">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <a href="dashboard.html" class="logo">SGMRP</a>
                <nav>
                    <ul>
                        <li><a href="dashboard.html" class="active">Dashboard</a></li>
                        <li><a href="lotes.html">Lotes</a></li>
                        <li><a href="#relatorios">Relat√≥rios</a></li>
                        <li><a href="#configuracoes">Configura√ß√µes</a></li>
                        <li><a href="#" id="logoutLink" style="color: #fed7d7;">Sair</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <main>
        <div class="container">
            <!-- Boas-vindas e informa√ß√µes do usu√°rio -->
            <section style="background: linear-gradient(135deg, var(--primary-color), var(--secondary-color)); color: white; padding: 2rem; border-radius: var(--border-radius-xl); margin-bottom: 2rem;">
                <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
                    <div>
                        <h1 style="color: white; margin-bottom: 0.5rem;">
                            Bem-vindo ao SGMRP
                        </h1>
                        <p style="margin-bottom: 0; opacity: 0.9;">
                            <span id="usuario-nome">Usu√°rio</span> - <span id="usuario-cargo">Funcion√°rio da SFA</span>
                        </p>
                        <p style="margin-bottom: 0; font-size: 0.875rem; opacity: 0.8;">
                            √öltimo acesso: <span id="ultimo-acesso">19/10/2025 - 14:30</span>
                        </p>
                    </div>
                    <div style="text-align: right;">
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">üìä</div>
                        <div style="font-size: 0.875rem; opacity: 0.9;">
                            Sistema Operacional
                        </div>
                    </div>
                </div>
            </section>

            <!-- Filtros Globais -->
            <section class="filters fade-in">
                <h3 style="margin-bottom: 1rem;">Filtros Globais</h3>
                <div class="filters-row">
                    <div style="flex: 1;">
                        <label for="filtro-mes" class="form-label">M√™s</label>
                        <select id="filtro-mes" class="form-select">
                            <option value="">Todos os meses</option>
                            <option value="1">Janeiro</option>
                            <option value="2">Fevereiro</option>
                            <option value="3">Mar√ßo</option>
                            <option value="4">Abril</option>
                            <option value="5">Maio</option>
                            <option value="6">Junho</option>
                            <option value="7">Julho</option>
                            <option value="8">Agosto</option>
                            <option value="9">Setembro</option>
                            <option value="10" selected>Outubro</option>
                            <option value="11">Novembro</option>
                            <option value="12">Dezembro</option>
                        </select>
                    </div>
                    <div style="flex: 1;">
                        <label for="filtro-ano" class="form-label">Ano</label>
                        <select id="filtro-ano" class="form-select">
                            <option value="2023">2023</option>
                            <option value="2024">2024</option>
                            <option value="2025" selected>2025</option>
                        </select>
                    </div>
                    <div style="flex: 2;">
                        <label for="filtro-busca" class="form-label">Buscar Pres√≠dio/Lote</label>
                        <input type="text" id="filtro-busca" class="form-input" placeholder="Digite o nome do pres√≠dio ou lote">
                    </div>
                    <div>
                        <label class="form-label">&nbsp;</label>
                        <button class="btn btn-primary" id="aplicar-filtros">
                            Aplicar Filtros
                        </button>
                    </div>
                </div>
            </section>

            <!-- Resumo Estat√≠stico -->
            <section style="margin-bottom: 3rem;">
                <h2>Resumo do Per√≠odo</h2>
                <div class="grid grid-cols-4">
                    <div class="card fade-in">
                        <div class="card-body" style="text-align: center; padding: 2rem 1rem;">
                            <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">üè¢</div>
                            <h3 style="color: var(--primary-color); margin-bottom: 0.25rem;">15</h3>
                            <p style="color: var(--gray-600); margin: 0; font-size: 0.875rem;">Unidades Ativas</p>
                        </div>
                    </div>
                    <div class="card fade-in">
                        <div class="card-body" style="text-align: center; padding: 2rem 1rem;">
                            <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">üçΩÔ∏è</div>
                            <h3 style="color: var(--success-color); margin-bottom: 0.25rem;">124,350</h3>
                            <p style="color: var(--gray-600); margin: 0; font-size: 0.875rem;">Refei√ß√µes Servidas</p>
                        </div>
                    </div>
                    <div class="card fade-in">
                        <div class="card-body" style="text-align: center; padding: 2rem 1rem;">
                            <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">‚ö†Ô∏è</div>
                            <h3 style="color: var(--warning-color); margin-bottom: 0.25rem;">8</h3>
                            <p style="color: var(--gray-600); margin: 0; font-size: 0.875rem;">Discrep√¢ncias</p>
                        </div>
                    </div>
                    <div class="card fade-in">
                        <div class="card-body" style="text-align: center; padding: 2rem 1rem;">
                            <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">‚úÖ</div>
                            <h3 style="color: var(--success-color); margin-bottom: 0.25rem;">94.2%</h3>
                            <p style="color: var(--gray-600); margin: 0; font-size: 0.875rem;">Conformidade</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Lotes Contratuais -->
            <section>
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                    <h2>Lotes Contratuais</h2>
                    <a href="lotes.html" class="btn btn-secondary">
                        Ver Todos os Lotes
                    </a>
                </div>

                <div class="lote-grid">
                    <!-- Lote 1 -->
                    <a href="lote-detalhes.html?lote=1" class="lote-card fade-in">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                            <h3>Lote 1</h3>
                            <div class="badge" style="background-color: rgba(255, 255, 255, 0.2); color: white; padding: 0.25rem 0.5rem; border-radius: 0.25rem; font-size: 0.75rem;">
                                ATIVO
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 1rem;">
                            <p class="presidios-count" style="margin: 0;">
                                <strong>5 pres√≠dios</strong> ‚Ä¢ Empresa ABC Alimenta√ß√£o
                            </p>
                        </div>

                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-bottom: 1rem;">
                            <div style="text-align: center;">
                                <div style="font-size: 1.5rem;">üçΩÔ∏è</div>
                                <div style="font-size: 0.875rem; opacity: 0.9;">28,450</div>
                                <div style="font-size: 0.75rem; opacity: 0.8;">Refei√ß√µes</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 1.5rem;">‚úÖ</div>
                                <div style="font-size: 0.875rem; opacity: 0.9;">96.8%</div>
                                <div style="font-size: 0.75rem; opacity: 0.8;">Conformidade</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 1.5rem;">‚ö†Ô∏è</div>
                                <div style="font-size: 0.875rem; opacity: 0.9;">2</div>
                                <div style="font-size: 0.75rem; opacity: 0.8;">Alertas</div>
                            </div>
                        </div>

                        <div style="font-size: 0.75rem; opacity: 0.8;">
                            √öltima atualiza√ß√£o: 18/10/2025
                        </div>
                    </a>

                    <!-- Lote 2 -->
                    <a href="lote-detalhes.html?lote=2" class="lote-card fade-in">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                            <h3>Lote 2</h3>
                            <div class="badge" style="background-color: rgba(255, 255, 255, 0.2); color: white; padding: 0.25rem 0.5rem; border-radius: 0.25rem; font-size: 0.75rem;">
                                ATIVO
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 1rem;">
                            <p class="presidios-count" style="margin: 0;">
                                <strong>4 pres√≠dios</strong> ‚Ä¢ Empresa XYZ Refei√ß√µes
                            </p>
                        </div>

                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-bottom: 1rem;">
                            <div style="text-align: center;">
                                <div style="font-size: 1.5rem;">üçΩÔ∏è</div>
                                <div style="font-size: 0.875rem; opacity: 0.9;">22,180</div>
                                <div style="font-size: 0.75rem; opacity: 0.8;">Refei√ß√µes</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 1.5rem;">‚úÖ</div>
                                <div style="font-size: 0.875rem; opacity: 0.9;">91.5%</div>
                                <div style="font-size: 0.75rem; opacity: 0.8;">Conformidade</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 1.5rem;">‚ö†Ô∏è</div>
                                <div style="font-size: 0.875rem; opacity: 0.9;">4</div>
                                <div style="font-size: 0.75rem; opacity: 0.8;">Alertas</div>
                            </div>
                        </div>

                        <div style="font-size: 0.75rem; opacity: 0.8;">
                            √öltima atualiza√ß√£o: 19/10/2025
                        </div>
                    </a>

                    <!-- Lote 3 -->
                    <a href="lote-detalhes.html?lote=3" class="lote-card fade-in">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                            <h3>Lote 3</h3>
                            <div class="badge" style="background-color: rgba(255, 255, 255, 0.2); color: white; padding: 0.25rem 0.5rem; border-radius: 0.25rem; font-size: 0.75rem;">
                                ATIVO
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 1rem;">
                            <p class="presidios-count" style="margin: 0;">
                                <strong>3 pres√≠dios</strong> ‚Ä¢ Empresa DEF Nutri√ß√£o
                            </p>
                        </div>

                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-bottom: 1rem;">
                            <div style="text-align: center;">
                                <div style="font-size: 1.5rem;">üçΩÔ∏è</div>
                                <div style="font-size: 0.875rem; opacity: 0.9;">18,920</div>
                                <div style="font-size: 0.75rem; opacity: 0.8;">Refei√ß√µes</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 1.5rem;">‚úÖ</div>
                                <div style="font-size: 0.875rem; opacity: 0.9;">98.2%</div>
                                <div style="font-size: 0.75rem; opacity: 0.8;">Conformidade</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 1.5rem;">‚úÖ</div>
                                <div style="font-size: 0.875rem; opacity: 0.9;">0</div>
                                <div style="font-size: 0.75rem; opacity: 0.8;">Alertas</div>
                            </div>
                        </div>

                        <div style="font-size: 0.75rem; opacity: 0.8;">
                            √öltima atualiza√ß√£o: 19/10/2025
                        </div>
                    </a>

                    <!-- Lote 4 -->
                    <a href="lote-detalhes.html?lote=4" class="lote-card fade-in">
                        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                            <h3>Lote 4</h3>
                            <div class="badge" style="background-color: rgba(255, 255, 255, 0.2); color: white; padding: 0.25rem 0.5rem; border-radius: 0.25rem; font-size: 0.75rem;">
                                ATIVO
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 1rem;">
                            <p class="presidios-count" style="margin: 0;">
                                <strong>3 pres√≠dios</strong> ‚Ä¢ Empresa GHI Catering
                            </p>
                        </div>

                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-bottom: 1rem;">
                            <div style="text-align: center;">
                                <div style="font-size: 1.5rem;">üçΩÔ∏è</div>
                                <div style="font-size: 0.875rem; opacity: 0.9;">16,800</div>
                                <div style="font-size: 0.75rem; opacity: 0.8;">Refei√ß√µes</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 1.5rem;">‚ö†Ô∏è</div>
                                <div style="font-size: 0.875rem; opacity: 0.9;">89.7%</div>
                                <div style="font-size: 0.75rem; opacity: 0.8;">Conformidade</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 1.5rem;">‚ö†Ô∏è</div>
                                <div style="font-size: 0.875rem; opacity: 0.9;">3</div>
                                <div style="font-size: 0.75rem; opacity: 0.8;">Alertas</div>
                            </div>
                        </div>

                        <div style="font-size: 0.75rem; opacity: 0.8;">
                            √öltima atualiza√ß√£o: 17/10/2025
                        </div>
                    </a>
                </div>
            </section>

            <!-- Alertas Recentes -->
            <section style="margin-top: 3rem;">
                <h2>Alertas e Discrep√¢ncias Recentes</h2>
                <div class="card fade-in">
                    <div class="card-body">
                        <div style="display: grid; gap: 1rem;">
                            <div class="alert alert-warning" style="display: flex; align-items: center; gap: 1rem;">
                                <div style="font-size: 1.5rem;">‚ö†Ô∏è</div>
                                <div style="flex: 1;">
                                    <strong>Pres√≠dio Central - Lote 2</strong><br>
                                    <span style="font-size: 0.875rem;">Diferen√ßa de +12 refei√ß√µes no almo√ßo do dia 18/10/2025</span>
                                </div>
                                <div style="font-size: 0.875rem; color: var(--gray-500);">
                                    H√° 1 dia
                                </div>
                            </div>

                            <div class="alert alert-danger" style="display: flex; align-items: center; gap: 1rem;">
                                <div style="font-size: 1.5rem;">üö®</div>
                                <div style="flex: 1;">
                                    <strong>Penitenci√°ria Norte - Lote 4</strong><br>
                                    <span style="font-size: 0.875rem;">Diferen√ßa de +25 refei√ß√µes no jantar do dia 17/10/2025</span>
                                </div>
                                <div style="font-size: 0.875rem; color: var(--gray-500);">
                                    H√° 2 dias
                                </div>
                            </div>

                            <div class="alert alert-info" style="display: flex; align-items: center; gap: 1rem;">
                                <div style="font-size: 1.5rem;">‚ÑπÔ∏è</div>
                                <div style="flex: 1;">
                                    <strong>Casa de Cust√≥dia Sul - Lote 1</strong><br>
                                    <span style="font-size: 0.875rem;">Dados do SIISP atualizados - diferen√ßas resolvidas</span>
                                </div>
                                <div style="font-size: 0.875rem; color: var(--gray-500);">
                                    H√° 3 dias
                                </div>
                            </div>
                        </div>

                        <div style="text-align: center; margin-top: 1.5rem;">
                            <a href="#relatorios" class="btn btn-secondary">
                                Ver Todos os Alertas
                            </a>
                        </div>
                    </div>
                </div>
            </section>

            <!-- A√ß√µes R√°pidas -->
            <section style="margin-top: 3rem; margin-bottom: 2rem;">
                <h2>A√ß√µes R√°pidas</h2>
                <div class="grid grid-cols-3">
                    <div class="card fade-in" style="cursor: pointer;" onclick="window.location.href='lote-detalhes.html?lote=1&acao=importar'">
                        <div class="card-body" style="text-align: center; padding: 2rem;">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">üì§</div>
                            <h4>Importar Dados</h4>
                            <p style="color: var(--gray-600); margin: 0;">
                                Importar novos mapas de refei√ß√£o via PDF
                            </p>
                        </div>
                    </div>

                    <div class="card fade-in" style="cursor: pointer;" onclick="window.location.href='lote-detalhes.html?acao=manual'">
                        <div class="card-body" style="text-align: center; padding: 2rem;">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">‚úèÔ∏è</div>
                            <h4>Entrada Manual</h4>
                            <p style="color: var(--gray-600); margin: 0;">
                                Registrar dados manualmente
                            </p>
                        </div>
                    </div>

                    <div class="card fade-in" style="cursor: pointer;" onclick="alert('Funcionalidade de relat√≥rios ser√° implementada em vers√µes futuras.')">
                        <div class="card-body" style="text-align: center; padding: 2rem;">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">üìä</div>
                            <h4>Gerar Relat√≥rio</h4>
                            <p style="color: var(--gray-600); margin: 0;">
                                Criar relat√≥rio consolidado
                            </p>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <footer>
        <div class="container text-center">
            <p style="margin: 0; color: var(--gray-400); font-size: 0.875rem;">
                ¬© 2025 SGMRP - Sistema de Gerenciamento de Mapas de Refei√ß√µes Penitenci√°rio
            </p>
        </div>
    </footer>

    <script>
        // Verificar se usu√°rio est√° logado (simula√ß√£o)
        window.addEventListener('load', function() {
            // Em uma aplica√ß√£o real, isso verificaria o token de autentica√ß√£o
            const usuarioSalvo = localStorage.getItem('sgmrp_usuario');
            if (!usuarioSalvo) {
                alert('Sess√£o expirada. Redirecionando para login.');
                window.location.href = 'login.html';
                return;
            }

            // Atualizar informa√ß√µes do usu√°rio na interface
            document.getElementById('usuario-nome').textContent = usuarioSalvo || 'Usu√°rio';
        });

        // Logout
        document.getElementById('logoutLink').addEventListener('click', function(e) {
            e.preventDefault();
            if (confirm('Tem certeza que deseja sair do sistema?')) {
                localStorage.removeItem('sgmrp_usuario');
                localStorage.removeItem('sgmrp_remember');
                window.location.href = 'login.html';
            }
        });

        // Aplicar filtros
        document.getElementById('aplicar-filtros').addEventListener('click', function() {
            const mes = document.getElementById('filtro-mes').value;
            const ano = document.getElementById('filtro-ano').value;
            const busca = document.getElementById('filtro-busca').value;

            // Simular aplica√ß√£o de filtros
            let mensagem = 'Filtros aplicados:\n';
            if (mes) mensagem += `- M√™s: ${getMonthName(mes)}\n`;
            if (ano) mensagem += `- Ano: ${ano}\n`;
            if (busca) mensagem += `- Busca: ${busca}\n`;
            
            if (!mes && !ano && !busca) {
                mensagem = 'Nenhum filtro selecionado. Exibindo todos os dados.';
            }

            alert(mensagem);

            // Aqui seria implementada a l√≥gica real de filtragem
            // que atualizaria os cards dos lotes e estat√≠sticas
        });

        function getMonthName(month) {
            const months = [
                '', 'Janeiro', 'Fevereiro', 'Mar√ßo', 'Abril', 'Maio', 'Junho',
                'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'
            ];
            return months[parseInt(month)];
        }

        // Busca em tempo real
        document.getElementById('filtro-busca').addEventListener('input', function() {
            const searchTerm = this.value.toLowerCase();
            const loteCards = document.querySelectorAll('.lote-card');
            
            loteCards.forEach(card => {
                const text = card.textContent.toLowerCase();
                if (text.includes(searchTerm) || searchTerm === '') {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        });

        // Anima√ß√µes de fade-in
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        // Observar elementos com classe fade-in
        document.querySelectorAll('.fade-in').forEach(el => {
            el.style.opacity = '0';
            el.style.transform = 'translateY(30px)';
            el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
            observer.observe(el);
        });

        // Atualizar data/hora do √∫ltimo acesso
        function updateLastAccess() {
            const now = new Date();
            const dateStr = now.toLocaleDateString('pt-BR');
            const timeStr = now.toLocaleTimeString('pt-BR', { 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            document.getElementById('ultimo-acesso').textContent = `${dateStr} - ${timeStr}`;
        }

        updateLastAccess();

        // Efeitos hover nos cards de lote
        document.querySelectorAll('.lote-card').forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-8px)';
            });
            
            card.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(-6px)';
            });
        });

        // Placeholder para funcionalidades futuras
        document.addEventListener('click', function(e) {
            if (e.target.closest('a[href="#relatorios"]')) {
                e.preventDefault();
                alert('M√≥dulo de Relat√≥rios ser√° implementado na pr√≥xima vers√£o do SGMRP.');
            }
            
            if (e.target.closest('a[href="#configuracoes"]')) {
                e.preventDefault();
                alert('M√≥dulo de Configura√ß√µes ser√° implementado na pr√≥xima vers√£o do SGMRP.');
            }
        });
    </script>
</body>
</html>